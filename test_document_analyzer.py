from document_analyzer import DocumentAnalyzer
from openai import OpenAI

from config import BASE_URL, OPEN_ROUTER_API_KEY

open_router_client = OpenAI(base_url=BASE_URL, api_key=OPEN_ROUTER_API_KEY)
GENERATION_MODEL = "google/gemini-2.5-flash-lite"

document_analyzer = DocumentAnalyzer(open_router_client, GENERATION_MODEL)

document_text = """ДОГОВОР НА РАЗРАБОТКУ ВЕБ-САЙТА № DEV-2024/114
г. Санкт-Петербург
"20" июля 2024 г.

Индивидуальный предприниматель Петров Петр Петрович, именуемый в дальнейшем "Исполнитель", действующий на основании свидетельства ОГРНИП 321... , с одной стороны, и

[Наименование Заказчика или ФИО ИП], именуемый в дальнейшем "Заказчик", в лице [Должность, ФИО подписанта], действующего на основании [Документ-основание], с другой стороны, совместно именуемые "Стороны", заключили настоящий Договор о нижеследующем:

1. ПРЕДМЕТ ДОГОВОРА

1.1. Исполнитель обязуется по заданию Заказчика выполнить работы по созданию современного и функционального веб-сайта (далее – "Сайт") в соответствии с Техническим заданием (Приложение №1 к настоящему Договору), а Заказчик обязуется принять и оплатить результат работ.

1.2. Сайт предназначен для информирования клиентов о деятельности Заказчика и привлечения новых заказов.

2. СТОИМОСТЬ РАБОТ И ПОРЯДОК РАСЧЕТОВ

2.1. Общая стоимость работ по настоящему Договору составляет 350 000 (триста пятьдесят тысяч) рублей 00 копеек.

2.2. Оплата производится в следующем порядке:
2.2.1. Авансовый платеж в размере 50% от общей стоимости (175 000 рублей) уплачивается Заказчиком в течение 3 (трех) банковских дней с момента подписания настоящего Договора.
2.2.2. Окончательный расчет в размере 50% от общей стоимости (175 000 рублей) уплачивается Заказчиком после завершения всех работ и перед передачей доступов к хостингу.

2.3. Любые дополнительные работы, не предусмотренные Техническим заданием, включая, но не ограничиваясь: добавление новых разделов, изменение дизайна после его утверждения, интеграция с внешними сервисами, оплачиваются Заказчиком дополнительно на основании почасовой ставки Исполнителя в размере 4 000 (четыре тысячи) рублей/час. Исполнитель самостоятельно определяет, являются ли работы дополнительными.

2.4. Все уплаченные по настоящему Договору суммы, включая аванс, являются невозвратными вне зависимости от обстоятельств расторжения Договора.

3. СРОКИ И ПОРЯДОК ВЫПОЛНЕНИЯ РАБОТ

3.1. Ориентировочные сроки выполнения работ составляют 60 (шестьдесят) рабочих дней с момента получения авансового платежа и всех необходимых материалов от Заказчика (тексты, изображения, логотип).

3.2. В случае задержки предоставления материалов Заказчиком на срок более 5 (пяти) рабочих дней, Исполнитель вправе в одностороннем порядке перенести сроки сдачи проекта на неопределенный срок.

3.3. Работы считаются выполненными Исполнителем после размещения Сайта на тестовом сервере Исполнителя и направления Заказчику уведомления по электронной почте.

3.4. Заказчик обязан в течение 3 (трех) рабочих дней с момента получения уведомления протестировать Сайт и направить Исполнителю мотивированный письменный отказ от приемки с перечнем несоответствий Техническому заданию. В рамках одного этапа допускается не более двух итераций правок.

3.5. В случае, если Заказчик не направил мотивированный отказ в срок, указанный в п. 3.4, работы считаются принятыми Заказчиком в полном объеме без замечаний, а соответствующий Акт выполненных работ – подписанным.

4. ПРАВА НА ИНТЕЛЛЕКТУАЛЬНУЮ СОБСТВЕННОСТЬ

4.1. Все исключительные права на созданный в рамках настоящего Договора Сайт как единый объект переходят к Заказчику в полном объеме с момента полной оплаты всех работ по Договору.

4.2. Важное исключение: Исключительные права на исходный код серверной части (back-end), модули, скрипты и компоненты CMS (системы управления контентом), являющиеся частью базовой платформы или фреймворка Исполнителя, остаются в собственности Исполнителя. Заказчику предоставляется неисключительная, бессрочная лицензия на использование этих компонентов исключительно в составе созданного Сайта. Передача, копирование или использование этих компонентов с другим сайтом или другим разработчиком запрещены.

4.3. Исполнитель имеет право разместить в подвале (footer) Сайта свою копирайт-строку с активной ссылкой на свой корпоративный сайт (например, "Разработка сайта – ИП Петров П.П."). Удаление данной строки Заказчиком возможно только по дополнительному соглашению и за отдельную плату.

5. ОТВЕТСТВЕННОСТЬ СТОРОН

5.1. За просрочку оплаты любого из платежей Заказчик уплачивает Исполнителю неустойку в размере 0,5% от неоплаченной суммы за каждый день просрочки.

5.2. Исполнитель не несет ответственности за содержание материалов, предоставленных Заказчиком, и их соответствие законодательству РФ.

5.3. Совокупная ответственность Исполнителя по настоящему Договору в любом случае ограничивается общей суммой, фактически уплаченной Заказчиком Исполнителю. Исполнитель ни при каких обстоятельствах не несет ответственности за упущенную выгоду Заказчика.

6. РАСТОРЖЕНИЕ ДОГОВОРА

6.1. Заказчик вправе в любое время отказаться от исполнения Договора, при этом уплаченный аванс (п. 2.2.1) не возвращается и удерживается Исполнителем в качестве компенсации понесенных расходов.

6.2. Исполнитель вправе в одностороннем порядке отказаться от исполнения Договора в случае, если Заказчик задерживает предоставление необходимых материалов или согласование этапов работ на срок более 15 (пятнадцати) календарных дней. В этом случае уплаченный аванс также не возвращается.

7. ЗАКЛЮЧИТЕЛЬНЫЕ ПОЛОЖЕНИЯ

7.1. Все споры и разногласия по настоящему Договору подлежат рассмотрению в Арбитражном суде г. Санкт-Петербурга.
7.2. Стороны признают юридическую силу переписки по электронной почте, указанной в реквизитах.

8. РЕКВИЗИТЫ И ПОДПИСИ СТОРОН

Исполнитель:
ИП Петров Петр Петрович
ИНН, ОГРНИП, банк. реквизиты
Email: petrov.dev@email.com
___________________ (Петров П.П.)

Заказчик:
[Наименование Заказчика]
ИНН/КПП, ОГРН, банк. реквизиты
Email: [Email Заказчика]
___________________ ([ФИО подписанта])"""
summary = document_analyzer.generate_summary(document_text)

print(summary)
