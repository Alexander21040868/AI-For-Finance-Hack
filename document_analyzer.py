from openai import OpenAI

class DocumentAnalyzer:
    def __init__(self,
                 open_router_client: OpenAI,
                 embedding_model: str,
                 generation_model: str,
                 ):
        self.open_router_client = open_router_client
        self.embedding_model = embedding_model
        self.generation_model = generation_model

    def generate_summary(self, document_text):
        prompt = f"""–¢—ã ‚Äî –æ–ø—ã—Ç–Ω—ã–π —é—Ä–∏—Å—Ç –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—è–º –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä—ã. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —è —Ç–µ–±–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—é, –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫—Ä–∞—Ç–∫–∏–π, –Ω–æ –µ–º–∫–∏–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.

–¢–≤–æ–π –æ—Ç—á–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–Ω—è—Ç–µ–Ω —á–µ–ª–æ–≤–µ–∫—É –±–µ–∑ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –°–¢–†–û–ì–û —Å–ª–µ–¥—É—é—â–µ–π:

#### üìÑ –ö—Ä–∞—Ç–∫–∞—è —Å—É—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤ 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö)
[–ó–¥–µ—Å—å –¥–∞–π –∫—Ä–∞—Ç–∫—É—é –≤—ã–∂–∏–º–∫—É: –∫—Ç–æ, —á—Ç–æ, –∫–æ–º—É –∏ –Ω–∞ –∫–∞–∫–∏—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö]

---

#### ‚ö†Ô∏è –ü—É–Ω–∫—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è (¬´–ö—Ä–∞—Å–Ω—ã–µ —Ñ–ª–∞–≥–∏¬ª)
[–≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª. –ù–∞–π–¥–∏ –≤ —Ç–µ–∫—Å—Ç–µ –∏ –æ–ø–∏—à–∏ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º –≤—Å–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –¥–ª—è –∞–∫—Ü–µ–Ω—Ç–æ–≤. –ò—â–∏:
- –í—ã—Å–æ–∫–∏–µ –∏–ª–∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —à—Ç—Ä–∞—Ñ—ã.
- –£—Å–ª–æ–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –¥–≤–æ—è–∫–æ.
- –ü—Ä–∞–≤–æ –Ω–∞ –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (—Ü–µ–Ω–∞, —Å—Ä–æ–∫–∏).
- –ù–µ–≤—ã–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏—è.
- –ê–≤—Ç–æ–ø—Ä–æ–ª–æ–Ω–≥–∞—Ü–∏—è –∏ —É—Å–ª–æ–≤–∏—è –æ—Ç–∫–∞–∑–∞ –æ—Ç –Ω–µ–µ.
- –ü–µ—Ä–µ–Ω–æ—Å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.]

---

#### üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è
[–ó–¥–µ—Å—å —Å–æ–±–µ—Ä–∏ –≤—Å–µ, —á—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –¥–µ–Ω–µ–≥: —Ä–∞–∑–º–µ—Ä –∞—Ä–µ–Ω–¥–Ω–æ–π –ø–ª–∞—Ç—ã, –¥–µ–ø–æ–∑–∏—Ç—ã, –ø–æ—Ä—è–¥–æ–∫ –æ–ø–ª–∞—Ç—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏.]

---

–í–ê–ñ–ù–û: –û—Å–Ω–æ–≤—ã–≤–∞–π—Å—è –ò–°–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–û –Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º —Ç–µ–∫—Å—Ç–µ. –ù–µ –≤—ã–¥—É–º—ã–≤–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–µ—á–∏—Ç–∞–µ–º –∏–ª–∏ —è–≤–ª—è–µ—Ç—Å—è –±–µ—Å—Å–º—ã—Å–ª–∏—Ü–µ–π –∏–∑-–∑–∞ –ø–ª–æ—Ö–æ–π –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∏, –Ω–∞–ø–∏—à–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É —Ñ—Ä–∞–∑—É: "–û–®–ò–ë–ö–ê: –¢–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫–∞–Ω –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞."

–¢–ï–ö–°–¢ –î–û–ö–£–ú–ï–ù–¢–ê:
{document_text}"""